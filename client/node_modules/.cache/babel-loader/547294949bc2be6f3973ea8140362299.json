{"ast":null,"code":"import _classCallCheck from \"/Users/rafalcymbalista/Projects/GhOSt_app/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/rafalcymbalista/Projects/GhOSt_app/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/rafalcymbalista/Projects/GhOSt_app/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/rafalcymbalista/Projects/GhOSt_app/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/rafalcymbalista/Projects/GhOSt_app/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/rafalcymbalista/Projects/GhOSt_app/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/rafalcymbalista/Projects/GhOSt_app/client/src/views/Projects/components/SLACard/SLAsTable.jsx\";\nimport React, { Component } from 'react';\nimport { Table, Button, ButtonGroup, Modal, Card, CardHeader, CardBody //Spinner\n} from 'reactstrap';\nimport { Spinner } from '@blueprintjs/core';\nimport UpdateslaForm from '../../../../components/Forms/SLAsForms/UpdateSLAForm';\nimport axios from 'axios';\n\nvar SLAsTable =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SLAsTable, _Component);\n\n  function SLAsTable(props) {\n    var _this;\n\n    _classCallCheck(this, SLAsTable);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SLAsTable).call(this, props));\n    _this.getSLAs = _this.getSLAs.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.renderTableHeaders = _this.renderTableHeaders.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.renderTableData = _this.renderTableData.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.closeModal = _this.closeModal.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      modal: false,\n      isLoading: true,\n      id: '',\n      projectName: '',\n      slaType: '',\n      SLA: '',\n      description: '',\n      logic: '',\n      target: '',\n      slaArr: []\n    };\n    return _this;\n  }\n\n  _createClass(SLAsTable, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getSLAs();\n    }\n  }, {\n    key: \"getSLAs\",\n    value: function getSLAs() {\n      var _this2 = this;\n\n      this.setState({\n        isLoading: true\n      });\n      var URL = '/api/sla/all';\n      axios.get(URL).then(function (res) {\n        _this2.setState({\n          slaArr: res.data,\n          isLoading: false\n        });\n      }).catch(function (err) {\n        alert('Error loading SLAs table');\n        console.log(JSON.stringify(err));\n      });\n    }\n  }, {\n    key: \"addActionButton\",\n    value: function addActionButton(sla) {\n      var _this3 = this;\n\n      return React.createElement(ButtonGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(Button, {\n        size: \"sm\",\n        color: \"danger\",\n        onClick: function onClick(e) {\n          return _this3.handleClick(e, 'remove', sla);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"fas fa-trash-alt\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      })), React.createElement(Button, {\n        size: \"sm\",\n        onClick: function onClick(e) {\n          return _this3.handleClick(e, 'edit', sla);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"fas fa-edit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      })));\n    }\n  }, {\n    key: \"handleClick\",\n    value: function handleClick(e, action, sla) {\n      e.preventDefault();\n      if (action === 'edit') this.editsla(sla);\n      if (action === 'remove') this.removesla(sla);\n    }\n  }, {\n    key: \"editsla\",\n    value: function editsla(sla) {\n      this.setState(function (prevState) {\n        return {\n          modal: !prevState.modal\n        };\n      });\n      this.setState({\n        id: sla._id,\n        projectName: sla.project.name,\n        slaType: sla.type.type,\n        SLA: sla.SLA,\n        description: sla.description,\n        logic: sla.logic,\n        target: sla.target\n      });\n    }\n  }, {\n    key: \"closeModal\",\n    value: function closeModal() {\n      this.setState(function (prevState) {\n        return {\n          modal: !prevState.modal\n        };\n      });\n    }\n  }, {\n    key: \"removesla\",\n    value: function removesla(sla) {\n      var URL = '/api/sla/' + sla._id;\n      axios.delete(URL).then(function (res) {\n        alert('sla ' + sla.SLA + ' removed!');\n        document.getElementById('getslasData').click();\n      }).catch(function (err) {\n        alert('Something went wrong :(');\n      });\n    }\n  }, {\n    key: \"renderTableHeaders\",\n    value: function renderTableHeaders() {\n      return React.createElement(\"tr\", {\n        className: \"bg-black text-white\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, \"Project\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, \"SLA Type\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, \"SLA\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, \"Description\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, \"Target\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, \"Logic\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"Action\"));\n    }\n  }, {\n    key: \"renderTableData\",\n    value: function renderTableData() {\n      var _this4 = this;\n\n      return this.state.slaArr.map(function (sla, index) {\n        return React.createElement(\"tr\", {\n          key: sla._id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        }, sla.project.name), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139\n          },\n          __self: this\n        }, sla.type.type), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140\n          },\n          __self: this\n        }, sla.SLA), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141\n          },\n          __self: this\n        }, sla.description), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        }, sla.target), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143\n          },\n          __self: this\n        }, sla.logic), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        }, _this4.addActionButton(sla)));\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          slaArr = _this$state.slaArr,\n          id = _this$state.id,\n          isLoading = _this$state.isLoading,\n          modal = _this$state.modal,\n          projectname = _this$state.projectname,\n          slaType = _this$state.slaType,\n          SLA = _this$state.SLA,\n          description = _this$state.description,\n          logic = _this$state.logic,\n          target = _this$state.target;\n\n      if (isLoading) {\n        return React.createElement(\"div\", {\n          className: \"text-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166\n          },\n          __self: this\n        }, React.createElement(Spinner, {\n          intend: \"primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167\n          },\n          __self: this\n        }));\n      }\n\n      if (slaArr.length === 0) {\n        return React.createElement(\"div\", {\n          className: \"text-center text-secondary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 174\n          },\n          __self: this\n        }, React.createElement(\"h6\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175\n          },\n          __self: this\n        }, \"No SLAs found...\"));\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, \"All Available SLAs\", React.createElement(Button, {\n        color: \"primary\",\n        size: \"sm\",\n        ref: \"getslasData\",\n        id: \"getslasData\",\n        className: \"float-right\",\n        onClick: this.getSLAs,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"fas fa-sync-alt\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }))), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }), React.createElement(Table, {\n        responsive: true,\n        borderless: true,\n        striped: true,\n        hover: true,\n        size: \"sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, this.renderTableHeaders()), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, this.renderTableData())), React.createElement(Modal, {\n        isOpen: modal,\n        toggle: true,\n        className: \"modal-full modal-my\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, React.createElement(CardHeader, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        class: \"fas fa-chart-line header-icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }), 'Edit sla: ' + SLA, React.createElement(\"span\", {\n        className: \"far fa-window-restore float-right header-icon text-secondary\",\n        onClick: this.closeModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      })), React.createElement(CardBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, React.createElement(UpdateslaForm, {\n        id: id,\n        projectname: projectname,\n        slaType: slaType,\n        SLA: SLA,\n        description: description,\n        target: target,\n        logic: logic,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return SLAsTable;\n}(Component);\n/*\r\n\r\n*/\n\n\nexport { SLAsTable as default };","map":{"version":3,"sources":["/Users/rafalcymbalista/Projects/GhOSt_app/client/src/views/Projects/components/SLACard/SLAsTable.jsx"],"names":["React","Component","Table","Button","ButtonGroup","Modal","Card","CardHeader","CardBody","Spinner","UpdateslaForm","axios","SLAsTable","props","getSLAs","bind","renderTableHeaders","renderTableData","handleClick","closeModal","state","modal","isLoading","id","projectName","slaType","SLA","description","logic","target","slaArr","setState","URL","get","then","res","data","catch","err","alert","console","log","JSON","stringify","sla","e","action","preventDefault","editsla","removesla","prevState","_id","project","name","type","delete","document","getElementById","click","map","index","addActionButton","projectname","length"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport {\r\n   Table,\r\n   Button,\r\n   ButtonGroup,\r\n   Modal,\r\n   Card,\r\n   CardHeader,\r\n   CardBody\r\n   //Spinner\r\n} from 'reactstrap';\r\nimport { Spinner } from '@blueprintjs/core';\r\nimport UpdateslaForm from '../../../../components/Forms/SLAsForms/UpdateSLAForm';\r\n\r\nimport axios from 'axios';\r\n\r\nexport default class SLAsTable extends Component {\r\n   constructor(props) {\r\n      super(props);\r\n      this.getSLAs = this.getSLAs.bind(this);\r\n      this.renderTableHeaders = this.renderTableHeaders.bind(this);\r\n      this.renderTableData = this.renderTableData.bind(this);\r\n      this.handleClick = this.handleClick.bind(this);\r\n      this.closeModal = this.closeModal.bind(this);\r\n      this.state = {\r\n         modal: false,\r\n         isLoading: true,\r\n         id: '',\r\n         projectName: '',\r\n         slaType: '',\r\n         SLA: '',\r\n         description: '',\r\n         logic: '',\r\n         target: '',\r\n         slaArr: []\r\n      };\r\n   }\r\n\r\n   componentDidMount() {\r\n      this.getSLAs();\r\n   }\r\n\r\n   getSLAs() {\r\n      this.setState({ isLoading: true });\r\n\r\n      const URL = '/api/sla/all';\r\n\r\n      axios\r\n         .get(URL)\r\n         .then(res => {\r\n            this.setState({\r\n               slaArr: res.data,\r\n               isLoading: false\r\n            });\r\n         })\r\n         .catch(err => {\r\n            alert('Error loading SLAs table');\r\n            console.log(JSON.stringify(err));\r\n         });\r\n   }\r\n\r\n   addActionButton(sla) {\r\n      return (\r\n         <ButtonGroup>\r\n            <Button\r\n               size='sm'\r\n               color='danger'\r\n               onClick={e => this.handleClick(e, 'remove', sla)}\r\n            >\r\n               <span className='fas fa-trash-alt' />\r\n            </Button>\r\n            <Button size='sm' onClick={e => this.handleClick(e, 'edit', sla)}>\r\n               <span className='fas fa-edit' />\r\n            </Button>\r\n         </ButtonGroup>\r\n      );\r\n   }\r\n\r\n   handleClick(e, action, sla) {\r\n      e.preventDefault();\r\n      if (action === 'edit') this.editsla(sla);\r\n      if (action === 'remove') this.removesla(sla);\r\n   }\r\n\r\n   editsla(sla) {\r\n      this.setState(prevState => ({\r\n         modal: !prevState.modal\r\n      }));\r\n\r\n      this.setState({\r\n         id: sla._id,\r\n         projectName: sla.project.name,\r\n         slaType: sla.type.type,\r\n         SLA: sla.SLA,\r\n         description: sla.description,\r\n         logic: sla.logic,\r\n         target: sla.target\r\n      });\r\n   }\r\n\r\n   closeModal() {\r\n      this.setState(prevState => ({\r\n         modal: !prevState.modal\r\n      }));\r\n   }\r\n\r\n   removesla(sla) {\r\n      const URL = '/api/sla/' + sla._id;\r\n      axios\r\n         .delete(URL)\r\n         .then(res => {\r\n            alert('sla ' + sla.SLA + ' removed!');\r\n            document.getElementById('getslasData').click();\r\n         })\r\n         .catch(err => {\r\n            alert('Something went wrong :(');\r\n         });\r\n   }\r\n\r\n   renderTableHeaders() {\r\n      return (\r\n         <tr className='bg-black text-white'>\r\n            <th>Project</th>\r\n            <th>SLA Type</th>\r\n            <th>SLA</th>\r\n            <th>Description</th>\r\n            <th>Target</th>\r\n            <th>Logic</th>\r\n            <th>Action</th>\r\n         </tr>\r\n      );\r\n   }\r\n\r\n   renderTableData() {\r\n      return this.state.slaArr.map((sla, index) => {\r\n         return (\r\n            <tr key={sla._id}>\r\n               <td>{sla.project.name}</td>\r\n               <td>{sla.type.type}</td>\r\n               <td>{sla.SLA}</td>\r\n               <td>{sla.description}</td>\r\n               <td>{sla.target}</td>\r\n               <td>{sla.logic}</td>\r\n               <td>{this.addActionButton(sla)}</td>\r\n            </tr>\r\n         );\r\n      });\r\n   }\r\n\r\n   render() {\r\n      const {\r\n         slaArr,\r\n         id,\r\n         isLoading,\r\n         modal,\r\n         projectname,\r\n         slaType,\r\n         SLA,\r\n         description,\r\n         logic,\r\n         target\r\n      } = this.state;\r\n\r\n      if (isLoading) {\r\n         return (\r\n            <div className='text-center'>\r\n               <Spinner intend='primary' />\r\n            </div>\r\n         );\r\n      }\r\n\r\n      if (slaArr.length === 0) {\r\n         return (\r\n            <div className='text-center text-secondary'>\r\n               <h6>No SLAs found...</h6>\r\n            </div>\r\n         );\r\n      }\r\n\r\n      return (\r\n         <div>\r\n            <p>\r\n               All Available SLAs\r\n               <Button\r\n                  color='primary'\r\n                  size='sm'\r\n                  ref='getslasData'\r\n                  id='getslasData'\r\n                  className='float-right'\r\n                  onClick={this.getSLAs}\r\n               >\r\n                  <span className='fas fa-sync-alt' />\r\n               </Button>\r\n            </p>\r\n            <hr />\r\n            <Table responsive borderless striped hover size='sm'>\r\n               <thead>{this.renderTableHeaders()}</thead>\r\n               <tbody>{this.renderTableData()}</tbody>\r\n            </Table>\r\n            <Modal isOpen={modal} toggle className='modal-full modal-my'>\r\n               <Card>\r\n                  <CardHeader>\r\n                     <span class='fas fa-chart-line header-icon' />\r\n                     {'Edit sla: ' + SLA}\r\n                     <span\r\n                        className='far fa-window-restore float-right header-icon text-secondary'\r\n                        onClick={this.closeModal}\r\n                     />\r\n                  </CardHeader>\r\n                  <CardBody>\r\n                     <UpdateslaForm\r\n                        id={id}\r\n                        projectname={projectname}\r\n                        slaType={slaType}\r\n                        SLA={SLA}\r\n                        description={description}\r\n                        target={target}\r\n                        logic={logic}\r\n                     />\r\n                  </CardBody>\r\n               </Card>\r\n            </Modal>\r\n         </div>\r\n      );\r\n   }\r\n}\r\n\r\n/*\r\n\r\n*/\r\n"]},"metadata":{},"sourceType":"module"}