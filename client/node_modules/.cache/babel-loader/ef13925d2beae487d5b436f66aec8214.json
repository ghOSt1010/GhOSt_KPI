{"ast":null,"code":"import _classCallCheck from \"/Users/rafalcymbalista/Projects/GhOSt_app/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/rafalcymbalista/Projects/GhOSt_app/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/rafalcymbalista/Projects/GhOSt_app/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/rafalcymbalista/Projects/GhOSt_app/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/rafalcymbalista/Projects/GhOSt_app/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/rafalcymbalista/Projects/GhOSt_app/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/rafalcymbalista/Projects/GhOSt_app/client/src/components/Table/ProjectTable/ProjectTable.jsx\";\nimport React, { Component } from 'react';\nimport { Table, Button, ButtonGroup, Modal, Card, CardHeader, CardBody } from 'reactstrap';\nimport UpdateProjectForm from '../../Card/ProjectCard/UpdateProjectForm/UpdateProjectForm';\nimport axios from 'axios';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport '@fortawesome/fontawesome-free';\n\nvar ProjectTable =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ProjectTable, _Component);\n\n  function ProjectTable(props) {\n    var _this;\n\n    _classCallCheck(this, ProjectTable);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ProjectTable).call(this, props));\n    _this.getProjects = _this.getProjects.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.renderTableHeaders = _this.renderTableHeaders.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.renderTableData = _this.renderTableData.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.closeModal = _this.closeModal.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      modal: false,\n      theme: _this.props.theme,\n      data: _this.props.data,\n      filterName: _this.props.name,\n      id: '',\n      name: '',\n      status: '',\n      deliveryType: '',\n      sm: '',\n      ops: '',\n      cim: 0,\n      ras: 0,\n      projects: []\n    };\n    return _this;\n  }\n\n  _createClass(ProjectTable, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getProjects();\n    }\n  }, {\n    key: \"getProjects\",\n    value: function getProjects() {\n      var _this2 = this;\n\n      var URL = 'http://localhost:3001/api/projects';\n      axios.get(URL).then(function (res) {\n        _this2.setState({\n          projects: res.data\n        });\n      }).catch(function (err) {\n        alert('Error loading Projects table');\n        console.log(JSON.stringify(err));\n      });\n    }\n  }, {\n    key: \"setTheme\",\n    value: function setTheme() {\n      var theme = this.state.theme;\n\n      if (theme === 'dark') {\n        return 'table-dark';\n      }\n\n      if (theme === 'light') {\n        return '';\n      }\n\n      console.log(theme);\n    }\n  }, {\n    key: \"renderTableHeaders\",\n    value: function renderTableHeaders() {\n      return React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, \"Name\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, \"Status\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, \"Delivery Type\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, \"SM\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, \"OPS\"), React.createElement(\"th\", {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, \"CIM\"), React.createElement(\"th\", {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, \"RAS\"), React.createElement(\"th\", {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, \"Action\"));\n    }\n  }, {\n    key: \"addActionButton\",\n    value: function addActionButton(project) {\n      var _this3 = this;\n\n      var _this$props = this.props,\n          edit = _this$props.edit,\n          remove = _this$props.remove,\n          retire = _this$props.retire;\n      if (edit) return React.createElement(Button, {\n        size: \"sm\",\n        onClick: function onClick(e) {\n          return _this3.handleClick(e, 'edit', project);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"fas fa-edit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }));\n      if (remove && retire) return React.createElement(ButtonGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(Button, {\n        size: \"sm\",\n        color: \"danger\",\n        onClick: function onClick(e) {\n          return _this3.handleClick(e, 'remove', project);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"fas fa-trash-alt\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      })), React.createElement(Button, {\n        size: \"sm\",\n        color: \"danger\",\n        onClick: function onClick(e) {\n          return _this3.handleClick(e, 'retire', project);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"fas fa-times-circle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      })));\n      if (remove) return React.createElement(Button, {\n        size: \"sm\",\n        onClick: function onClick(e) {\n          return _this3.handleClick(e, 'remove', project);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"fas fa-trash-alt\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }));\n    }\n  }, {\n    key: \"handleClick\",\n    value: function handleClick(e, action, project) {\n      e.preventDefault();\n      if (action === 'edit') this.editProject(project);\n      if (action === 'remove') this.removeProject(project);\n      if (action === 'retire') this.retireProject(project);\n    }\n  }, {\n    key: \"editProject\",\n    value: function editProject(project) {\n      this.setState(function (prevState) {\n        return {\n          modal: !prevState.modal\n        };\n      });\n      this.setState({\n        id: project._id,\n        name: project.name,\n        status: project.status.status,\n        deliveryType: project.deliveryType.deliveryType,\n        sm: project.sm.name,\n        ops: project.ops.name,\n        cim: project.cim,\n        ras: project.ras\n      });\n    }\n  }, {\n    key: \"closeModal\",\n    value: function closeModal() {\n      this.setState(function (prevState) {\n        return {\n          modal: !prevState.modal\n        };\n      });\n    }\n  }, {\n    key: \"removeProject\",\n    value: function removeProject(project) {\n      var _this4 = this;\n\n      var URL = 'http://localhost:3001/api/projects/' + project._id;\n      axios.delete(URL).then(function (res) {\n        alert('Project ' + project.name + ' removed!');\n\n        _this4.getProjects();\n      }).catch(function (err) {\n        alert('Something went wrong :(');\n      });\n    }\n  }, {\n    key: \"retireProject\",\n    value: function retireProject(project) {\n      var _this5 = this;\n\n      var URL = 'http://localhost:3001/api/projects/retire/' + project._id;\n      axios.put(URL).then(function (res) {\n        alert('Project ' + project.name + ' is retired');\n\n        _this5.getProjects();\n      }).catch(function (err) {\n        alert('Something went wrong :(');\n      });\n    }\n  }, {\n    key: \"renderTableData\",\n    value: function renderTableData() {\n      var _this6 = this;\n\n      return this.state.projects.map(function (project, index) {\n        return React.createElement(\"tr\", {\n          key: project._id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 190\n          },\n          __self: this\n        }, project.name), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 191\n          },\n          __self: this\n        }, project.status.status), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 192\n          },\n          __self: this\n        }, project.deliveryType.deliveryType), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 193\n          },\n          __self: this\n        }, project.sm.name), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194\n          },\n          __self: this\n        }, project.ops.name), React.createElement(\"td\", {\n          className: \"text-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195\n          },\n          __self: this\n        }, project.cim), React.createElement(\"td\", {\n          className: \"text-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 196\n          },\n          __self: this\n        }, project.ras), React.createElement(\"td\", {\n          className: \"text-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 197\n          },\n          __self: this\n        }, _this6.addActionButton(project)));\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          modal = _this$state.modal,\n          id = _this$state.id,\n          name = _this$state.name,\n          status = _this$state.status,\n          deliveryType = _this$state.deliveryType,\n          sm = _this$state.sm,\n          ops = _this$state.ops,\n          cim = _this$state.cim,\n          ras = _this$state.ras;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, \"All Available Projects\", React.createElement(Button, {\n        color: \"primary\",\n        size: \"sm\",\n        className: \"float-right\",\n        onClick: this.getProjects,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"fas fa-sync-alt\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }))), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }), React.createElement(Table, {\n        responsive: true,\n        borderless: true,\n        striped: true,\n        hover: true,\n        size: \"sm\",\n        className: this.setTheme(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, this.renderTableHeaders()), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, this.renderTableData())), React.createElement(Modal, {\n        isOpen: modal,\n        toggle: true,\n        className: \"modal-full modal-my\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, React.createElement(Card, {\n        className: this.setTheme(this.props.theme),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, React.createElement(CardHeader, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        class: \"fas fa-chart-line header-icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }), 'Update project: ' + name, React.createElement(\"span\", {\n        className: \"far fa-window-restore float-right header-icon text-secondary\",\n        onClick: this.closeModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      })), React.createElement(CardBody, {\n        className: \"card-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }, React.createElement(UpdateProjectForm, {\n        projectID: id,\n        projectName: name,\n        sm: sm,\n        status: status,\n        deliveryType: deliveryType,\n        ops: ops,\n        cim: cim,\n        ras: ras,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return ProjectTable;\n}(Component);\n/*\r\n\r\n*/\n\n\nexport { ProjectTable as default };","map":{"version":3,"sources":["/Users/rafalcymbalista/Projects/GhOSt_app/client/src/components/Table/ProjectTable/ProjectTable.jsx"],"names":["React","Component","Table","Button","ButtonGroup","Modal","Card","CardHeader","CardBody","UpdateProjectForm","axios","ProjectTable","props","getProjects","bind","renderTableHeaders","renderTableData","handleClick","closeModal","state","modal","theme","data","filterName","name","id","status","deliveryType","sm","ops","cim","ras","projects","URL","get","then","res","setState","catch","err","alert","console","log","JSON","stringify","project","edit","remove","retire","e","action","preventDefault","editProject","removeProject","retireProject","prevState","_id","delete","put","map","index","addActionButton","setTheme"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport {\r\n   Table,\r\n   Button,\r\n   ButtonGroup,\r\n   Modal,\r\n   Card,\r\n   CardHeader,\r\n   CardBody\r\n} from 'reactstrap';\r\nimport UpdateProjectForm from '../../Card/ProjectCard/UpdateProjectForm/UpdateProjectForm';\r\nimport axios from 'axios';\r\n\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport '@fortawesome/fontawesome-free';\r\n\r\nexport default class ProjectTable extends Component {\r\n   constructor(props) {\r\n      super(props);\r\n      this.getProjects = this.getProjects.bind(this);\r\n      this.renderTableHeaders = this.renderTableHeaders.bind(this);\r\n      this.renderTableData = this.renderTableData.bind(this);\r\n      this.handleClick = this.handleClick.bind(this);\r\n      this.closeModal = this.closeModal.bind(this);\r\n      this.state = {\r\n         modal: false,\r\n         theme: this.props.theme,\r\n         data: this.props.data,\r\n         filterName: this.props.name,\r\n         id: '',\r\n         name: '',\r\n         status: '',\r\n         deliveryType: '',\r\n         sm: '',\r\n         ops: '',\r\n         cim: 0,\r\n         ras: 0,\r\n         projects: []\r\n      };\r\n   }\r\n\r\n   componentDidMount() {\r\n      this.getProjects();\r\n   }\r\n\r\n   getProjects() {\r\n      const URL = 'http://localhost:3001/api/projects';\r\n\r\n      axios\r\n         .get(URL)\r\n         .then(res => {\r\n            this.setState({\r\n               projects: res.data\r\n            });\r\n         })\r\n         .catch(err => {\r\n            alert('Error loading Projects table');\r\n            console.log(JSON.stringify(err));\r\n         });\r\n   }\r\n\r\n   setTheme() {\r\n      const { theme } = this.state;\r\n      if (theme === 'dark') {\r\n         return 'table-dark';\r\n      }\r\n      if (theme === 'light') {\r\n         return '';\r\n      }\r\n      console.log(theme);\r\n   }\r\n\r\n   renderTableHeaders() {\r\n      return (\r\n         <tr>\r\n            <th>Name</th>\r\n            <th>Status</th>\r\n            <th>Delivery Type</th>\r\n            <th>SM</th>\r\n            <th>OPS</th>\r\n            <th className='text-center'>CIM</th>\r\n            <th className='text-center'>RAS</th>\r\n            <th className='text-center'>Action</th>\r\n         </tr>\r\n      );\r\n   }\r\n\r\n   addActionButton(project) {\r\n      const { edit, remove, retire } = this.props;\r\n      if (edit)\r\n         return (\r\n            <Button\r\n               size='sm'\r\n               onClick={e => this.handleClick(e, 'edit', project)}\r\n            >\r\n               <span className='fas fa-edit' />\r\n            </Button>\r\n         );\r\n      if (remove && retire)\r\n         return (\r\n            <ButtonGroup>\r\n               <Button\r\n                  size='sm'\r\n                  color='danger'\r\n                  onClick={e => this.handleClick(e, 'remove', project)}\r\n               >\r\n                  <span className='fas fa-trash-alt' />\r\n               </Button>\r\n               <Button\r\n                  size='sm'\r\n                  color='danger'\r\n                  onClick={e => this.handleClick(e, 'retire', project)}\r\n               >\r\n                  <span className='fas fa-times-circle' />\r\n               </Button>\r\n            </ButtonGroup>\r\n         );\r\n      if (remove)\r\n         return (\r\n            <Button\r\n               size='sm'\r\n               onClick={e => this.handleClick(e, 'remove', project)}\r\n            >\r\n               <span className='fas fa-trash-alt' />\r\n            </Button>\r\n         );\r\n   }\r\n\r\n   handleClick(e, action, project) {\r\n      e.preventDefault();\r\n      if (action === 'edit') this.editProject(project);\r\n      if (action === 'remove') this.removeProject(project);\r\n      if (action === 'retire') this.retireProject(project);\r\n   }\r\n\r\n   editProject(project) {\r\n      this.setState(prevState => ({\r\n         modal: !prevState.modal\r\n      }));\r\n      this.setState({\r\n         id: project._id,\r\n         name: project.name,\r\n         status: project.status.status,\r\n         deliveryType: project.deliveryType.deliveryType,\r\n         sm: project.sm.name,\r\n         ops: project.ops.name,\r\n         cim: project.cim,\r\n         ras: project.ras\r\n      });\r\n   }\r\n\r\n   closeModal() {\r\n      this.setState(prevState => ({\r\n         modal: !prevState.modal\r\n      }));\r\n   }\r\n\r\n   removeProject(project) {\r\n      const URL = 'http://localhost:3001/api/projects/' + project._id;\r\n\r\n      axios\r\n         .delete(URL)\r\n         .then(res => {\r\n            alert('Project ' + project.name + ' removed!');\r\n            this.getProjects();\r\n         })\r\n         .catch(err => {\r\n            alert('Something went wrong :(');\r\n         });\r\n   }\r\n\r\n   retireProject(project) {\r\n      const URL = 'http://localhost:3001/api/projects/retire/' + project._id;\r\n\r\n      axios\r\n         .put(URL)\r\n         .then(res => {\r\n            alert('Project ' + project.name + ' is retired');\r\n            this.getProjects();\r\n         })\r\n         .catch(err => {\r\n            alert('Something went wrong :(');\r\n         });\r\n   }\r\n\r\n   renderTableData() {\r\n      return this.state.projects.map((project, index) => {\r\n         return (\r\n            <tr key={project._id}>\r\n               <td>{project.name}</td>\r\n               <td>{project.status.status}</td>\r\n               <td>{project.deliveryType.deliveryType}</td>\r\n               <td>{project.sm.name}</td>\r\n               <td>{project.ops.name}</td>\r\n               <td className='text-center'>{project.cim}</td>\r\n               <td className='text-center'>{project.ras}</td>\r\n               <td className='text-center'>{this.addActionButton(project)}</td>\r\n            </tr>\r\n         );\r\n      });\r\n   }\r\n\r\n   render() {\r\n      const {\r\n         modal,\r\n         id,\r\n         name,\r\n         status,\r\n         deliveryType,\r\n         sm,\r\n         ops,\r\n         cim,\r\n         ras\r\n      } = this.state;\r\n      return (\r\n         <div>\r\n            <p>\r\n               All Available Projects\r\n               <Button\r\n                  color='primary'\r\n                  size='sm'\r\n                  className='float-right'\r\n                  onClick={this.getProjects}\r\n               >\r\n                  <span className='fas fa-sync-alt' />\r\n               </Button>\r\n            </p>\r\n            <hr />\r\n            <Table\r\n               responsive\r\n               borderless\r\n               striped\r\n               hover\r\n               size='sm'\r\n               className={this.setTheme()}\r\n            >\r\n               <thead>{this.renderTableHeaders()}</thead>\r\n               <tbody>{this.renderTableData()}</tbody>\r\n            </Table>\r\n            <Modal isOpen={modal} toggle className='modal-full modal-my'>\r\n               <Card className={this.setTheme(this.props.theme)}>\r\n                  <CardHeader>\r\n                     <span class='fas fa-chart-line header-icon' />\r\n                     {'Update project: ' + name}\r\n                     <span\r\n                        className='far fa-window-restore float-right header-icon text-secondary'\r\n                        onClick={this.closeModal}\r\n                     />\r\n                  </CardHeader>\r\n\r\n                  <CardBody className='card-body'>\r\n                     <UpdateProjectForm\r\n                        projectID={id}\r\n                        projectName={name}\r\n                        sm={sm}\r\n                        status={status}\r\n                        deliveryType={deliveryType}\r\n                        ops={ops}\r\n                        cim={cim}\r\n                        ras={ras}\r\n                     />\r\n                  </CardBody>\r\n               </Card>\r\n            </Modal>\r\n         </div>\r\n      );\r\n   }\r\n}\r\n\r\n/*\r\n\r\n*/\r\n"]},"metadata":{},"sourceType":"module"}