{"ast":null,"code":"import _regeneratorRuntime from \"/Users/rafalcymbalista/Projects/GhOSt_app/client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/rafalcymbalista/Projects/GhOSt_app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/rafalcymbalista/Projects/GhOSt_app/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/rafalcymbalista/Projects/GhOSt_app/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/rafalcymbalista/Projects/GhOSt_app/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/rafalcymbalista/Projects/GhOSt_app/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/rafalcymbalista/Projects/GhOSt_app/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/rafalcymbalista/Projects/GhOSt_app/client/src/views/AdminPanel/components/UsersTable.jsx\";\nimport React, { Component } from 'react';\nimport { HTMLTable, Button, NonIdealState, H5, Spinner, ContextMenuTarget, Menu, MenuItem, ContextMenu } from '@blueprintjs/core';\nimport Client from '../../../Modules/Client/Client';\n\nvar UsersTable =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(UsersTable, _Component);\n\n  function UsersTable(props) {\n    var _this;\n\n    _classCallCheck(this, UsersTable);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(UsersTable).call(this, props));\n    _this.state = {\n      users: [],\n      isLoading: true,\n      errorMsg: ''\n    };\n    return _this;\n  }\n\n  _createClass(UsersTable, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getData();\n    }\n  }, {\n    key: \"setLoading\",\n    value: function setLoading(loading) {\n      this.setState({\n        isLoading: loading\n      });\n    }\n  }, {\n    key: \"resetErrorMsg\",\n    value: function resetErrorMsg() {\n      this.setState({\n        errorMsg: ''\n      });\n    }\n  }, {\n    key: \"getData\",\n    value: function () {\n      var _getData = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var result;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.setLoading(true);\n                _context.prev = 1;\n                this.resetErrorMsg();\n                _context.next = 5;\n                return Client.Services.UsersService.getUsers();\n\n              case 5:\n                result = _context.sent;\n                this.setState({\n                  users: result.data\n                });\n                console.log(this.state.users);\n                _context.next = 14;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](1);\n                this.setState({\n                  errorMsg: _context.t0.response.status\n                });\n                Client.Notifications.alert('Error while loading users list');\n\n              case 14:\n                _context.prev = 14;\n                this.setLoading(false);\n                return _context.finish(14);\n\n              case 17:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[1, 10, 14, 17]]);\n      }));\n\n      function getData() {\n        return _getData.apply(this, arguments);\n      }\n\n      return getData;\n    }()\n  }, {\n    key: \"renderTableHeader\",\n    value: function renderTableHeader() {\n      return React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, \"User Name\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, \"Role\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, \"Role\")));\n    }\n  }, {\n    key: \"renderTableBody\",\n    value: function renderTableBody() {\n      return React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, this.renderTableRows());\n    }\n  }, {\n    key: \"renderTableRows\",\n    value: function renderTableRows() {\n      var _this2 = this;\n\n      return this.state.users.map(function (user) {\n        return React.createElement(\"tr\", {\n          key: user._id,\n          onContextMenu: function onContextMenu(e) {\n            return _this2.handeClick(e, user.username);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76\n          },\n          __self: this\n        }, user.username), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        }, user.email), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78\n          },\n          __self: this\n        }, user.role));\n      });\n    }\n  }, {\n    key: \"handeClick\",\n    value: function handeClick(e, username) {\n      e.preventDefault();\n      ContextMenu.show(this.renderContextMenu(e, username), {\n        left: e.clientX,\n        top: e.clientY\n      });\n    }\n  }, {\n    key: \"renderContextMenu\",\n    value: function renderContextMenu(e, username) {\n      return React.createElement(Menu, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(MenuItem, {\n        icon: \"user\",\n        text: username,\n        disabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }), React.createElement(Menu.Divider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }), React.createElement(MenuItem, {\n        icon: \"edit\",\n        text: \"Edit User\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(MenuItem, {\n        text: \"tesing sub menu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      })), React.createElement(MenuItem, {\n        icon: \"remove\",\n        text: \"Remove user\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }), React.createElement(MenuItem, {\n        icon: \"properties\",\n        text: \"Show more...\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }));\n    }\n  }, {\n    key: \"renderContent\",\n    value: function renderContent() {\n      var _this3 = this;\n\n      if (this.state.errorMsg) {\n        return React.createElement(NonIdealState, {\n          icon: \"issue\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        }, React.createElement(H5, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        }, React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }, \"Something went wrong\")), React.createElement(\"i\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }, \"Cannot load users table\"), React.createElement(Button, {\n          icon: \"refresh\",\n          minimal: true,\n          onClick: function onClick() {\n            return _this3.getData();\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        }));\n      }\n\n      return React.createElement(HTMLTable, {\n        fill: true,\n        condensed: true,\n        striped: true,\n        interactive: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, this.renderTableHeader(), this.renderTableBody());\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.isLoading) {\n        return React.createElement(Spinner, {\n          intent: \"primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, this.renderContent());\n    }\n  }]);\n\n  return UsersTable;\n}(Component);\n\nexport { UsersTable as default };","map":{"version":3,"sources":["/Users/rafalcymbalista/Projects/GhOSt_app/client/src/views/AdminPanel/components/UsersTable.jsx"],"names":["React","Component","HTMLTable","Button","NonIdealState","H5","Spinner","ContextMenuTarget","Menu","MenuItem","ContextMenu","Client","UsersTable","props","state","users","isLoading","errorMsg","getData","loading","setState","setLoading","resetErrorMsg","Services","UsersService","getUsers","result","data","console","log","response","status","Notifications","alert","renderTableRows","map","user","_id","e","handeClick","username","email","role","preventDefault","show","renderContextMenu","left","clientX","top","clientY","renderTableHeader","renderTableBody","renderContent"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {\n   HTMLTable,\n   Button,\n   NonIdealState,\n   H5,\n   Spinner,\n   ContextMenuTarget,\n   Menu,\n   MenuItem,\n   ContextMenu\n} from '@blueprintjs/core';\n\nimport Client from '../../../Modules/Client/Client';\n\nexport default class UsersTable extends Component {\n   constructor(props) {\n      super(props);\n      this.state = {\n         users: [],\n         isLoading: true,\n         errorMsg: ''\n      };\n   }\n   componentDidMount() {\n      this.getData();\n   }\n   setLoading(loading) {\n      this.setState({\n         isLoading: loading\n      });\n   }\n   resetErrorMsg() {\n      this.setState({\n         errorMsg: ''\n      });\n   }\n   async getData() {\n      this.setLoading(true);\n      var result;\n      try {\n         this.resetErrorMsg();\n         result = await Client.Services.UsersService.getUsers();\n         this.setState({\n            users: result.data\n         });\n         console.log(this.state.users);\n      } catch (err) {\n         this.setState({ errorMsg: err.response.status });\n         Client.Notifications.alert('Error while loading users list');\n      } finally {\n         this.setLoading(false);\n      }\n   }\n   renderTableHeader() {\n      return (\n         <thead>\n            <tr>\n               <th>User Name</th>\n               <th>Role</th>\n               <th>Role</th>\n            </tr>\n         </thead>\n      );\n   }\n   renderTableBody() {\n      return <tbody>{this.renderTableRows()}</tbody>;\n   }\n   renderTableRows() {\n      return this.state.users.map(user => {\n         return (\n            <tr\n               key={user._id}\n               onContextMenu={e => this.handeClick(e, user.username)}\n            >\n               <td>{user.username}</td>\n               <td>{user.email}</td>\n               <td>{user.role}</td>\n            </tr>\n         );\n      });\n   }\n   handeClick(e, username) {\n      e.preventDefault();\n      ContextMenu.show(this.renderContextMenu(e, username), {\n         left: e.clientX,\n         top: e.clientY\n      });\n   }\n   renderContextMenu(e, username) {\n      return (\n         <Menu>\n            <MenuItem icon='user' text={username} disabled />\n            <Menu.Divider />\n            <MenuItem icon='edit' text='Edit User'>\n               <MenuItem text='tesing sub menu'></MenuItem>\n            </MenuItem>\n            <MenuItem icon='remove' text='Remove user' />\n            <MenuItem icon='properties' text='Show more...' />\n         </Menu>\n      );\n   }\n   renderContent() {\n      if (this.state.errorMsg) {\n         return (\n            <NonIdealState icon='issue'>\n               <H5>\n                  <strong>Something went wrong</strong>\n               </H5>\n               <i>Cannot load users table</i>\n               <Button\n                  icon='refresh'\n                  minimal\n                  onClick={() => this.getData()}\n               ></Button>\n            </NonIdealState>\n         );\n      }\n      return (\n         <HTMLTable fill condensed striped interactive>\n            {this.renderTableHeader()}\n            {this.renderTableBody()}\n         </HTMLTable>\n      );\n   }\n\n   render() {\n      if (this.state.isLoading) {\n         return <Spinner intent='primary'></Spinner>;\n      }\n      return <div>{this.renderContent()}</div>;\n   }\n}\n"]},"metadata":{},"sourceType":"module"}